<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<AnchorPane fx:id="root" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="it.polimi.ingsw.view.GUI.fxmlcontroller.FlightPhaseController">
    <!-- main container (three vertical sections) -->
    <HBox alignment="CENTER" spacing="10.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
        <padding>
            <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
        </padding>
        <!-- others players' ship -->
        <VBox fx:id="otherPlayersContainer" prefWidth="300.0" spacing="10.0" style="-fx-background-color: #2a1a4a; -fx-background-radius: 10;">
            <children>
                <Label style="-fx-text-fill: yellow; -fx-font-size: 25px;" text="Other Players">
                </Label>

            </children>
            <padding>
                <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
            </padding>
        </VBox>

        <!-- central section with log events and action buttons -->
        <VBox prefWidth="525.0" spacing="10.0" style="-fx-background-color: #1a0d2e; -fx-background-radius: 10;">
            <padding>
                <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
            </padding>

            <!-- EVENT'S LOG - Con testo che va a capo -->
            <VBox prefHeight="152.0" prefWidth="530.0" spacing="8.0" style="-fx-background-color: black; -fx-background-radius: 8; -fx-border-color: #4A90E2; -fx-border-width: 1; -fx-border-radius: 8;">
                <Label text="Event's Log" textFill="WHITE">
                    <font>
                        <Font size="16.0" />
                    </font>
                </Label>

                <Separator style="-fx-background-color: rgba(255, 255, 255, 0.3);" />

                <ScrollPane fx:id="statusScrollPane" hbarPolicy="NEVER" maxHeight="243.0" minHeight="80" prefHeight="119.0" prefWidth="507.0" style="-fx-background-color: transparent; -fx-border-color: transparent;" vbarPolicy="AS_NEEDED">
                    <Label fx:id="logLabel" maxWidth="480.0" style="-fx-background-color: transparent; -fx-padding: 5; -fx-line-spacing: 2;" textFill="#CCCCCC" wrapText="true">
                    </Label>
                </ScrollPane>
                <padding>
                    <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                </padding>
            </VBox>

            <VBox alignment="CENTER" prefHeight="194.0" prefWidth="530.0" spacing="10.0" VBox.vgrow="ALWAYS">

                <!-- INSTRUCTIONS -->
                <VBox fx:id="" prefHeight="288.0" prefWidth="530.0" spacing="10.0" style="-fx-background-color: rgba(74, 144, 226, 0.15); -fx-background-radius: 8; -fx-border-color: #4A90E2; -fx-border-width: 1; -fx-border-radius: 8;">
                    <Label text="Game Status &amp; Instructions" textFill="WHITE">
                        <font>
                            <Font size="18.0" />
                        </font>
                        <padding>
                            <Insets bottom="8.0" />
                        </padding>
                    </Label>

                    <!-- main status -->
                    <Label fx:id="mainStatusLabel" style="-fx-background-color: rgba(74, 144, 226, 0.2); -fx-background-radius: 5; -fx-padding: 10; -fx-border-color: #4A90E2; -fx-border-width: 1; -fx-border-radius: 5;" textFill="#4A90E2" wrapText="true">
                        <font>
                            <Font size="18.0" />
                        </font>
                    </Label>

                    <Separator style="-fx-background-color: rgba(255, 255, 255, 0.3);">
                        <VBox.margin>
                            <Insets top="5.0" />
                        </VBox.margin>
                    </Separator>

                    <!-- detailed instructions -->
                    <ScrollPane hbarPolicy="NEVER" maxHeight="152.0" minHeight="90.0" prefHeight="111.0" prefWidth="507.0" style="-fx-background-color: transparent; -fx-border-color: transparent;" vbarPolicy="AS_NEEDED">
                        <Label fx:id="instructionLabel" maxWidth="480.0" style="-fx-background-color: transparent; -fx-padding: 5; -fx-line-spacing: 3;" textFill="#CCCCCC" wrapText="true">
                            <font>
                                <Font size="20.0" />
                            </font>
                        </Label>
                    </ScrollPane>
                    <padding>
                        <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                    </padding>
                </VBox>
            </VBox>

            <!-- Card counter centrato - Ridotto margine superiore -->
            <HBox alignment="CENTER" prefHeight="84.0" prefWidth="530.0">
                <VBox.margin>
                    <Insets top="-5.0" />
                </VBox.margin>
                <Label fx:id="cardCounterLabel" alignment="CENTER" prefHeight="65.0" prefWidth="239.0" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: white;" text="Cards resolved so far:" />
            </HBox>

            <!-- Actual and previous card - spazio ridotto -->
            <HBox alignment="CENTER" prefHeight="315.0" prefWidth="607.0" spacing="10">
                <VBox.margin>
                    <Insets top="5.0" />
                </VBox.margin>
                <children>

                    <!-- Previous card -->
                    <VBox alignment="CENTER" prefHeight="329.0" prefWidth="260.0" spacing="10.0" VBox.vgrow="ALWAYS">
                        <Label prefWidth="119.0" text="Previous card" textFill="WHITE">
                            <font>
                                <Font size="20.0" />
                            </font>
                        </Label>
                        <ImageView fx:id="previousCardImage" fitHeight="228.0" fitWidth="260.0" layoutX="2.0" layoutY="2.0" pickOnBounds="true" preserveRatio="true" style="-fx-padding: 10" />
                    </VBox>

                    <!-- Actual card -->
                    <VBox alignment="CENTER" prefHeight="337.0" prefWidth="260.0" spacing="10.0" VBox.vgrow="ALWAYS">
                        <Label text="Actual card" textFill="WHITE">
                            <font>
                                <Font size="20.0" />
                            </font>
                        </Label>
                        <ImageView fx:id="currentCardImage" fitHeight="229.0" fitWidth="260.0" layoutX="2.0" layoutY="2.0" pickOnBounds="true" preserveRatio="true" style="-fx-padding: 10" />
                    </VBox>
                </children>

            </HBox>

            <!-- MAIN BUTTON - Aggiunto margine superiore per piÃ¹ spazio -->
            <HBox alignment="CENTER" spacing="20.0">
                <VBox.margin>
                    <Insets top="20.0" />
                </VBox.margin>
                <Button fx:id="mainButton" alignment="CENTER" minWidth="220.0" mnemonicParsing="false" prefHeight="12.0" prefWidth="320.0" styleClass="button" />
            </HBox>

            <!-- SECONDARY BUTTONS -->
            <HBox alignment="CENTER" spacing="20.0">
                <Button fx:id="endFlightButton" alignment="CENTER" minWidth="220.0" mnemonicParsing="false" onMouseClicked="#endFlightHandler" prefHeight="25.0" prefWidth="220.0" styleClass="button" text="End flight" />
                <Button alignment="CENTER" minWidth="220.0" mnemonicParsing="false" onMouseClicked="#leaveGameHandler" prefHeight="12.0" prefWidth="220.0" styleClass="button-danger" text="Leave game" />
            </HBox>
        </VBox>

        <!-- your ship and board info -->
        <VBox prefWidth="500.0" spacing="10.0" style="-fx-background-color: #2a1a4a; -fx-background-radius: 10;">
            <!-- board info -->
            <VBox alignment="CENTER" spacing="5.0">
                <Label style="-fx-text-fill: yellow; -fx-font-size: 25px;" text="Board Info">
                    <padding>
                        <Insets bottom="15.0" />
                    </padding>
                </Label>

                <HBox spacing="10.0">
                    <!-- Parte sinistra: Immagine -->
                    <VBox alignment="CENTER" prefWidth="271.0" spacing="5.0">
                        <children>
                            <!-- Container per l'immagine -->
                            <Pane maxHeight="200.0" maxWidth="220.0" minHeight="200.0" minWidth="220.0" style="-fx-background-color: #1a0d2e; -fx-background-radius: 5;">
                                <children>
                                    <ImageView fx:id="pointImage" fitHeight="190.0" fitWidth="210.0" layoutX="5.0" layoutY="5.0" pickOnBounds="true" preserveRatio="true" />
                                </children>
                            </Pane>
                        </children>
                    </VBox>

                    <VBox alignment="CENTER" prefWidth="240.0" spacing="5.0">
                        <children>
                            <Label style="-fx-text-fill: yellow; -fx-font-size: 18px;" text="Players in game:">
                                <padding>
                                    <Insets bottom="5.0" top="10.0" />
                                </padding>
                            </Label>

                            <Text fx:id="playersInGameLabel" styleClass="label" textAlignment="CENTER" wrappingWidth="220" />

                            <Label style="-fx-text-fill: yellow; -fx-font-size: 18px;" text="Starting deck:">
                                <padding>
                                    <Insets bottom="5.0" top="10.0" />
                                </padding>
                            </Label>

                            <Text fx:id="playersStartingDeckLabel" styleClass="label" textAlignment="CENTER" wrappingWidth="220" />
                        </children>
                    </VBox>
                </HBox>
            </VBox>

            <!-- your ship -->
            <VBox alignment="CENTER">
                <Label style="-fx-text-fill: yellow; -fx-font-size: 25px;" text="Your Ship">
                    <padding>
                        <Insets bottom="15.0" top="20.0" />
                    </padding>
                </Label>

                <Pane maxHeight="400.0" maxWidth="450.0" minWidth="450.0" prefWidth="450.0">
                    <!-- ship image -->
                    <ImageView fx:id="playerShipImage" fitHeight="396.0" fitWidth="446.0" layoutX="2.0" layoutY="2.0" pickOnBounds="true" preserveRatio="true" />

                    <!-- player's tiles -->
                    <GridPane fx:id="shipGrid" layoutX="2.0" layoutY="40.0" prefHeight="396.0" prefWidth="446.0" />
                </Pane>

                <Label fx:id="errorLabel" styleClass="error-text" text="">
                </Label>

                <HBox fx:id="indexBooleanButtonsContainer" alignment="CENTER" maxHeight="100.0" maxWidth="410.0" minHeight="100.0" minWidth="410.0" visible="false" />

                <!-- drag and drop objects container -->
                <FlowPane fx:id="flowPane" alignment="CENTER" hgap="10.0" maxHeight="100.0" maxWidth="410.0" minHeight="100.0" minWidth="410.0" prefHeight="100.0" prefWidth="410.0" style="-fx-background-color: #1a0d2e;" vgap="10.0" visible="false">
                    <padding>
                        <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                    </padding>
                </FlowPane>
            </VBox>
        </VBox>
    </HBox>

</AnchorPane>
